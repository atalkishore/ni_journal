<% include ../partials/_Variable.ejs %>

<% if(showAd.toLowerCase() == "true"){ %>
<% if(!isAuthenticated || !user?.isAdDisabled){ %>
<script data-ad-client="ca-pub-8797542869086956" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<% } %>
<% } %>
<script src="<%= process.env.STATIC_FILES %>/public/vendors/popper/popper.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.2.3/js/bootstrap.min.js" integrity="sha512-1/RvZTcCDEUjY/CypiMz+iqqtaoQfAITmNSJY17Myp4Ms5mdxPS5UV7iOfdZoxcGhzFbOm6sntTKJppjvuhg4g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="<%= process.env.STATIC_FILES %>/public/vendors/anchorjs/anchor.min.js"></script>
<script src="<%= process.env.STATIC_FILES %>/public/vendors/is/is.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/js/all.min.js" integrity="sha512-6PM0qYu5KExuNcKt5bURAoT6KCThUmHRewN3zUFNaoI6Di7XJPTMoT6K0nsagZKk2OB4L7E3q1uQKHNHd4stIQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="<%= process.env.STATIC_FILES %>/public/vendors/lodash/lodash.min.js"></script>
<script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=window.scroll"></script>
<script src="<%= process.env.STATIC_FILES %>/public/vendors/list.js/list.min.js"></script>
<script src="<%= process.env.STATIC_FILES %>/public/vendors/feather-icons/feather.min.js"></script>
<script src="<%= process.env.STATIC_FILES %>/public/vendors/dayjs/dayjs.min.js"></script>
<script src="<%= process.env.STATIC_FILES %>/public/assets/js/phoenix.js"></script>
<script src="<%= process.env.STATIC_FILES %>/public/vendors/choices/choices.min.js"></script>
<script src="<%= process.env.STATIC_FILES %>/public/vendors/swiper/swiper-bundle.min.js"></script>
<script src="<%= process.env.STATIC_FILES %>/public/assets/js/echarts.min.js" integrity="sha512-weWXHm0Ws2cZKjjwugRMnnOAx9uCP/wUVf84W7/fXQimwYUK28zPDGPprDozomQLpKv6U99xN9PI9+yLI9qxNw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>





<script async src='https://cse.google.com/cse.js?cx=partner-pub-8797542869086956:0l9d6fjln5i'></script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<% if(showAd.toLowerCase() == "true"){ %>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-VP8PBCKYV2"></script>
<script>
  window.dataLayer = window.dataLayer || [];

  function gtag() {
    dataLayer.push(arguments);
  }
  gtag('js', new Date());

  gtag('config', 'G-VP8PBCKYV2');
</script>

<% } %>


<% if(ENABLE_CLARITY.toUpperCase() == "TRUE"){ %>
<script type="text/javascript">
  (function(c, l, a, r, i, t, y) {
    c[a] = c[a] || function() {
      (c[a].q = c[a].q || []).push(arguments)
    };
    t = l.createElement(r);
    t.async = 1;
    t.src = "https://www.clarity.ms/tag/" + i;
    y = l.getElementsByTagName(r)[0];
    y.parentNode.insertBefore(t, y);
  })(window, document, "clarity", "script", "eseojjc623");
</script>
<% } %>


<div class="modal fade" id="ModalLoadingScreen" tabindex="-1" aria-labelledby="verticallyCenteredModalLabel" style="display: none;" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content p-0 " style="transform: skewY(-5deg);">
      <div class="modal-body text-center">
        <div class="spinner-grow text-primary" role="status">
          <span class="visually-hidden">Loading...</span>
        </div>
        <div class="spinner-grow text-secondary" role="status">
          <span class="visually-hidden">Loading...</span>
        </div>
        <div class="spinner-grow text-success" role="status">
          <span class="visually-hidden">Loading...</span>
        </div>
        <div class="spinner-grow text-info" role="status">
          <span class="visually-hidden">Loading...</span>
        </div>
        <div class="spinner-grow text-warning" role="status">
          <span class="visually-hidden">Loading...</span>
        </div>
        <div class="spinner-grow text-danger" role="status">
          <span class="visually-hidden">Loading...</span>
        </div>

      </div>
    </div>
  </div>
</div>
<div class="modal fade" id="ModalDetector" data-bs-backdrop="static" tabindex="-1" aria-labelledby="verticallyCenteredModalLabel" style="display: none;" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered ">
    <div class="modal-content p-0 ">
      <div class="modal-body text-center px-1 py-3">
        <div class="modal-detector-center">
          <div class="warn-icon mb-4">
            <span class="icon"><i class="fas fa-exclamation"></i></span>
          </div>
          <h2 class="mb-4 text-danger">AdBlock Detected!</h2>
          <p class="text-start px-2">Sure, Ad-blocking softwares does a great job at blocking ads, but it also blocks some useful and important features of our website.
          </p>
          <p>For the best possible experience, <span class="fw-bold text-danger">please disable your Ad Blocker.</span></p>

        </div>
      </div>
    </div>
  </div>
</div>
<% if(!isAuthenticated){ %>
<div class="modal fade" id="ModalLogin" tabindex="-1" aria-labelledby="verticallyCenteredModalLabel" style="display: none;" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered ">
    <div class="modal-content p-0 ">
      <div class="modal-body text-center">
        <main class="main" id="top">
          <%- include('../authentication/_login-box.ejs') %>
        </main>
      </div>
    </div>
  </div>
</div>
<script>
  const modalLogin = new bootstrap.Modal('#ModalLogin', {
    keyboard: false
  });
</script>
<% } %>
<script>
  const myModal = new bootstrap.Modal('#ModalLoadingScreen', {
    keyboard: false
  });
  const modalDetector = new bootstrap.Modal('#ModalDetector', {
    keyboard: false
  });
  var showPopup = false;


  <% if(showAd.toLowerCase() == "true"){ %>
  <% if(!isAuthenticated || !user?.isAdDisabled){ %>
  $(document).ready(function() {
    try {
      $.getScript("https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js").done(function(script, textStatus) {
          console.log(textStatus);
        })
        .fail(function(jqxhr, settings, exception) {
          modalDetector.show();
        });

    } catch (err) {
      modalDetector.show();
    }
  });
  // modalDetector.show();
  <% } %>
  <% } %>
  window.addEventListener("pageshow", function(event) {
    var historyTraversal = event.persisted ||
      (typeof window.performance != "undefined" &&
        window.performance.navigation.type === 2);
    if (historyTraversal) {
      window.location.reload();
    }
  });
</script>
<script src="/js/common-fn.js?v=1"></script>