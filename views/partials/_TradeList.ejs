 <div id="message" class="alert d-none" role="alert"></div>
    <div class="table-responsive">
      <table class="table table-striped table-bordered" id="tradesTable">
        <thead class="thead-dark">
          <tr>
            <th>Stock Name</th>
            <th>Price</th>
            <th>Order Type</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
        </tbody>
      </table>
    </div>
  </div>
  
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script>
    $(document).ready(function () {
      function fetchTrades() {
        $.getJSON("/trade/api/trades", function (data) {
          const tbody = $("#tradesTable tbody");
          tbody.empty();
  
          data.forEach((trade) => {
            tbody.append(`
              <tr data-id="${trade._id}">
                <td>${trade.stockName}</td>
                <td>${trade.price}</td>
                <td>
                  <span class="badge ${trade.orderType === 'buy' ? 'bg-success' : 'bg-danger'}">
                    ${trade.orderType.charAt(0).toUpperCase() + trade.orderType.slice(1)}
                  </span>
                </td>
                <td>
                  <button class="btn btn-outline-danger btn-sm delete-trade" data-id="${trade._id}">
                    Delete
                  </button>
                </td>
              </tr>
            `);
          });
        }).fail(function () {
          $("#message")
            .removeClass("d-none alert-success")
            .addClass("alert-danger")
            .text("Failed to fetch trades.");
        });
      }
  
      fetchTrades();
  
      $("#addTradeForm").submit(function (event) {
        event.preventDefault();
  
        const tradeData = {
          stockName: $("#stockName").val(),
          price: $("#price").val(),
          orderType: $("#orderType").val(),
        };
  
        $.ajax({
          url: "/trade/api/add-trade",
          type: "POST",
          contentType: "application/json",
          data: JSON.stringify(tradeData),
          success: function (response) {
            $("#message")
              .removeClass("d-none alert-danger")
              .addClass("alert-success")
              .text(response.message);
  
            fetchTrades();
            $("#addTradeForm")[0].reset();
          },
          error: function (err) {
            $("#message")
              .removeClass("d-none alert-success")
              .addClass("alert-danger")
              .text(err.responseJSON.message || "Failed to add trade.");
          },
        });
      });
  
      $(document).on("click", ".delete-trade", function () {
        const tradeId = $(this).data("id");
  
        if (confirm("Are you sure you want to delete this trade?")) {
          $.ajax({
            url: "/trade/api/trade-del",
            type: "DELETE",
            contentType: "application/json",
            data: JSON.stringify({ id: tradeId }),
            success: function (response) {
              $("#message")
                .removeClass("d-none alert-danger")
                .addClass("alert-success")
                .text(response.message);
  
              fetchTrades();
            },
            error: function (err) {
              $("#message")
                .removeClass("d-none alert-success")
                .addClass("alert-danger")
                .text(err.responseJSON.message || "Failed to delete trade.");
            },
          });
        }
      });
    });
  </script>
  